) +
scale_y_continuous(
breaks = c(0, 0.5, 1),
labels = c(-1, 0, 1)
) +
labs(
x = expression(a),
y = expression(f(a))
) +
theme_minimal(base_size = 14) +
theme(
axis.title = element_text(size = 16, face = "bold"),    # Ztučněné názvy os
axis.text = element_text(size = 14, face = "bold"),     # Ztučněné hodnoty
axis.line = element_line(size = 1, color = "black"),  # Zvýraznění os
axis.ticks = element_line(size = 1, color = "black"), # Zvýraznění značek
panel.grid.major = element_line(size = 0.8, linetype = "dashed", color = "gray50"), # Hlavní mřížky
panel.grid.minor = element_blank(),                    # Skrytí vedlejších mřížek
axis.title.x = element_text(margin = margin(t = 10)),
axis.title.y = element_text(margin = margin(r = 10))
)
library(ggplot2)
# Sigmoidní funkce
sigmoid <- function(a) {
1 / (1 + exp(-a))
}
# Generování dat
a_values <- seq(-10, 10, length.out = 100)
f_values <- sigmoid(a_values)
data <- data.frame(a = a_values, f_a = f_values)
# Vykreslení grafu
ggplot(data, aes(x = a, y = f_a)) +
geom_line(color = "blue", size = 1.5) +  # Zvýraznění křivky
scale_x_continuous(
breaks = c(-10, 0, 10),
labels = c(expression(-infinity), 0, expression(+infinity))
) +
scale_y_continuous(
breaks = c(0, 0.5, 1),
labels = c(-1, 0, 1)
) +
labs(
x = expression(a),
y = expression(f(a))
) +
theme_minimal(base_size = 14) +
theme(
axis.title = element_text(size = 18, face = "bold"),    # Ztučněné názvy os
axis.text = element_text(size = 16, face = "bold"),     # Ztučněné hodnoty
axis.line = element_line(size = 1, color = "black"),  # Zvýraznění os
axis.ticks = element_line(size = 1, color = "black"), # Zvýraznění značek
panel.grid.major = element_line(size = 0.5, linetype = "dashed", color = "gray30"), # Hlavní mřížky
panel.grid.minor = element_blank(),                    # Skrytí vedlejších mřížek
axis.title.x = element_text(margin = margin(t = 10)),
axis.title.y = element_text(margin = margin(r = 10))
)
library(ggplot2)
# Sigmoidní funkce
sigmoid <- function(a) {
1 / (1 + exp(-a))
}
# Generování dat
a_values <- seq(-10, 10, length.out = 100)
f_values <- sigmoid(a_values)
data <- data.frame(a = a_values, f_a = f_values)
# Vykreslení grafu
ggplot(data, aes(x = a, y = f_a)) +
geom_line(color = "black", size = 1.8) +  # Zvýraznění křivky
scale_x_continuous(
breaks = c(-10, 0, 10),
labels = c(expression(-infinity), 0, expression(+infinity))
) +
scale_y_continuous(
breaks = c(0, 0.5, 1),
labels = c(-1, 0, 1)
) +
labs(
x = expression(a),
y = expression(f(a))
) +
theme_minimal(base_size = 14) +
theme(
axis.title = element_text(size = 18, face = "bold"),    # Ztučněné názvy os
axis.text = element_text(size = 16, face = "bold"),     # Ztučněné hodnoty
axis.line = element_line(size = 1, color = "black"),  # Zvýraznění os
axis.ticks = element_line(size = 1, color = "black"), # Zvýraznění značek
panel.grid.major = element_line(size = 0.5, linetype = "dashed", color = "gray30"), # Hlavní mřížky
panel.grid.minor = element_blank(),                    # Skrytí vedlejších mřížek
axis.title.x = element_text(margin = margin(t = 10)),
axis.title.y = element_text(margin = margin(r = 10))
)
library(ggplot2)
# Sigmoidní funkce
sigmoid <- function(a) {
1 / (1 + exp(-a))
}
# Generování dat
a_values <- seq(-10, 10, length.out = 100)
f_values <- sigmoid(a_values)
data <- data.frame(a = a_values, f_a = f_values)
# Vykreslení grafu
ggplot(data, aes(x = a, y = f_a)) +
geom_line(color = "black", size = 1.8) +  # Zvýraznění křivky
scale_x_continuous(
breaks = c(-10, 0, 10),
labels = c(expression(-infinity), 0, expression(+infinity))
) +
scale_y_continuous(
breaks = c(0, 0.5, 1),
labels = c(-1, 0, 1)
) +
labs(
x = expression(a),
y = expression(f(a))
) +
theme_minimal(base_size = 14) +
theme(
axis.title = element_text(size = 18, face = "bold"),    # Ztučněné názvy os
axis.text = element_text(size = 16, face = "bold"),     # Ztučněné hodnoty
axis.line = element_line(size = 1.5, color = "black"),  # Zvýraznění os
axis.ticks = element_line(size = 1, color = "black"), # Zvýraznění značek
panel.grid.major = element_line(size = 0.5, linetype = "dashed", color = "gray30"), # Hlavní mřížky
panel.grid.minor = element_blank(),                    # Skrytí vedlejších mřížek
axis.title.x = element_text(margin = margin(t = 10)),
axis.title.y = element_text(margin = margin(r = 10))
)
library(ggplot2)
# Sigmoidní funkce
sigmoid <- function(a) {
1 / (1 + exp(-a))
}
# Generování dat
a_values <- seq(-10, 10, length.out = 100)
f_values <- sigmoid(a_values)
data <- data.frame(a = a_values, f_a = f_values)
# Vykreslení grafu
ggplot(data, aes(x = a, y = f_a)) +
geom_line(color = "black", size = 1.8) +  # Zvýraznění křivky
scale_x_continuous(
breaks = c(-10, 0, 10),
labels = c(expression(-infinity), 0, expression(+infinity))
) +
scale_y_continuous(
breaks = c(0, 0.5, 1),
labels = c(-1, 0, 1)
) +
labs(
x = expression(a),
y = expression(f(a))
) +
theme_minimal(base_size = 14) +
theme(
axis.title = element_text(size = 18, face = "bold"),    # Ztučněné názvy os
axis.text = element_text(size = 16, face = "bold"),     # Ztučněné hodnoty
axis.line = element_line(size = 1, color = "black"),  # Zvýraznění os
axis.ticks = element_line(size = 1, color = "black"), # Zvýraznění značek
panel.grid.major = element_line(size = 0.5, linetype = "dashed", color = "gray30"), # Hlavní mřížky
panel.grid.minor = element_blank(),                    # Skrytí vedlejších mřížek
axis.title.x = element_text(margin = margin(t = 10)),
axis.title.y = element_text(margin = margin(r = 10))
)
library(ggplot2)
# Sigmoidní funkce
sigmoid <- function(a) {
1 / (1 + exp(-a))
}
# Generování dat
a_values <- seq(-10, 10, length.out = 100)
f_values <- sigmoid(a_values)
data <- data.frame(a = a_values, f_a = f_values)
# Vykreslení grafu
ggplot(data, aes(x = a, y = f_a)) +
geom_line(color = "black", size = 1.7) +  # Zvýraznění křivky
scale_x_continuous(
breaks = c(-10, 0, 10),
labels = c(expression(-infinity), 0, expression(+infinity))
) +
scale_y_continuous(
breaks = c(0, 0.5, 1),
labels = c(-1, 0, 1)
) +
labs(
x = expression(a),
y = expression(f(a))
) +
theme_minimal(base_size = 14) +
theme(
axis.title = element_text(size = 18, face = "bold"),    # Ztučněné názvy os
axis.text = element_text(size = 16, face = "bold"),     # Ztučněné hodnoty
axis.line = element_line(size = 1, color = "black"),  # Zvýraznění os
axis.ticks = element_line(size = 1, color = "black"), # Zvýraznění značek
panel.grid.major = element_line(size = 0.5, linetype = "dashed", color = "gray30"), # Hlavní mřížky
panel.grid.minor = element_blank(),                    # Skrytí vedlejších mřížek
axis.title.x = element_text(margin = margin(t = 10)),
axis.title.y = element_text(margin = margin(r = 10))
)
library(ggplot2)
# Sigmoidní funkce
sigmoid <- function(a) {
1 / (1 + exp(-a))
}
# Generování dat
a_values <- seq(-10, 10, length.out = 100)
f_values <- sigmoid(a_values)
data <- data.frame(a = a_values, f_a = f_values)
# Vykreslení grafu
ggplot(data, aes(x = a, y = f_a)) +
geom_line(color = "black", size = 1.6) +  # Zvýraznění křivky
scale_x_continuous(
breaks = c(-10, 0, 10),
labels = c(expression(-infinity), 0, expression(+infinity))
) +
scale_y_continuous(
breaks = c(0, 0.5, 1),
labels = c(-1, 0, 1)
) +
labs(
x = expression(a),
y = expression(f(a))
) +
theme_minimal(base_size = 14) +
theme(
axis.title = element_text(size = 18, face = "bold"),    # Ztučněné názvy os
axis.text = element_text(size = 16, face = "bold"),     # Ztučněné hodnoty
axis.line = element_line(size = 1, color = "black"),  # Zvýraznění os
axis.ticks = element_line(size = 1, color = "black"), # Zvýraznění značek
panel.grid.major = element_line(size = 0.5, linetype = "dashed", color = "gray30"), # Hlavní mřížky
panel.grid.minor = element_blank(),                    # Skrytí vedlejších mřížek
axis.title.x = element_text(margin = margin(t = 10)),
axis.title.y = element_text(margin = margin(r = 10))
)
library(ggplot2)
# Sigmoidní funkce
sigmoid <- function(a) {
1 / (1 + exp(-a))
}
# Generování dat
a_values <- seq(-10, 10, length.out = 100)
f_values <- sigmoid(a_values)
data <- data.frame(a = a_values, f_a = f_values)
# Vykreslení grafu
ggplot(data, aes(x = a, y = f_a)) +
geom_line(color = "black", size = 1.6) +  # Zvýraznění křivky
scale_x_continuous(
breaks = c(-10, 0, 10),
labels = c(expression(-infinity), 0, expression(+infinity))
) +
scale_y_continuous(
breaks = c(0, 0.5, 1),  # Správné hodnoty sigmoidní funkce
labels = c(0, 0.5, 1)
) +
labs(
x = expression(a),
y = expression(f(a))
) +
theme_minimal(base_size = 14) +
theme(
axis.title = element_text(size = 18, face = "bold"),    # Ztučněné názvy os
axis.text = element_text(size = 16, face = "bold"),     # Ztučněné hodnoty
axis.line = element_line(size = 1, color = "black"),    # Zvýraznění os
axis.ticks = element_line(size = 1, color = "black"),   # Zvýraznění značek
panel.grid.major = element_line(size = 0.5, linetype = "dashed", color = "gray30"), # Hlavní mřížky
panel.grid.minor = element_blank(),                     # Skrytí vedlejších mřížek
axis.title.x = element_text(margin = margin(t = 10)),
axis.title.y = element_text(margin = margin(r = 10))
)
#tanh
{
library(ggplot2)
# Hyperbolický tangens
tanh_function <- function(a) {
tanh(a)
}
# Generování dat
a_values <- seq(-10, 10, length.out = 100)
f_values <- tanh_function(a_values)
data <- data.frame(a = a_values, f_a = f_values)
# Vykreslení grafu
ggplot(data, aes(x = a, y = f_a)) +
geom_line(color = "black", size = 1.6) +  # Zvýraznění křivky
scale_x_continuous(
breaks = c(-10, 0, 10),
labels = c(expression(-infinity), 0, expression(+infinity))
) +
scale_y_continuous(
breaks = c(-1, 0, 1),  # Rozsah hyperbolického tangens
labels = c(-1, 0, 1)
) +
labs(
x = expression(a),
y = expression(f(a))
) +
theme_minimal(base_size = 14) +
theme(
axis.title = element_text(size = 18, face = "bold"),    # Ztučněné názvy os
axis.text = element_text(size = 16, face = "bold"),     # Ztučněné hodnoty
axis.line = element_line(size = 1, color = "black"),    # Zvýraznění os
axis.ticks = element_line(size = 1, color = "black"),   # Zvýraznění značek
panel.grid.major = element_line(size = 0.5, linetype = "dashed", color = "gray30"), # Hlavní mřížky
panel.grid.minor = element_blank(),                     # Skrytí vedlejších mřížek
axis.title.x = element_text(margin = margin(t = 10)),
axis.title.y = element_text(margin = margin(r = 10))
)
}
#relu
{
library(ggplot2)
# ReLU funkce
relu_function <- function(a) {
pmax(0, a)
}
# Generování dat
a_values <- seq(-10, 10, length.out = 100)
f_values <- relu_function(a_values)
data <- data.frame(a = a_values, f_a = f_values)
# Vykreslení grafu
ggplot(data, aes(x = a, y = f_a)) +
geom_line(color = "black", size = 1.6) +  # Zvýraznění křivky
scale_x_continuous(
breaks = c(-10, 0, 10),
labels = c(expression(-infinity), 0, expression(+infinity))
) +
scale_y_continuous(
breaks = c(0, 5, 10),  # Příkladné rozsahy pro ReLU
labels = c(0, 5, 10)
) +
labs(
x = expression(a),
y = expression(f(a))
) +
theme_minimal(base_size = 14) +
theme(
axis.title = element_text(size = 18, face = "bold"),    # Ztučněné názvy os
axis.text = element_text(size = 16, face = "bold"),     # Ztučněné hodnoty
axis.line = element_line(size = 1, color = "black"),    # Zvýraznění os
axis.ticks = element_line(size = 1, color = "black"),   # Zvýraznění značek
panel.grid.major = element_line(size = 0.5, linetype = "dashed", color = "gray30"), # Hlavní mřížky
panel.grid.minor = element_blank(),                     # Skrytí vedlejších mřížek
axis.title.x = element_text(margin = margin(t = 10)),
axis.title.y = element_text(margin = margin(r = 10))
)
}
#relu
{
# ReLU funkce
relu_function <- function(a) {
pmax(0, a)
}
# Generování dat
a_values <- seq(-10, 10, length.out = 100)
f_values <- relu_function(a_values)
data <- data.frame(a = a_values, f_a = f_values)
# Vykreslení grafu
ggplot(data, aes(x = a, y = f_a)) +
geom_line(color = "black", size = 1.6) +  # Zvýraznění křivky
scale_x_continuous(
breaks = c(-10, 0, 10),
labels = c(expression(-infinity), 0, expression(+infinity))
) +
scale_y_continuous(
breaks = c(0, 10),
labels = c(0, expression(+infinity))
) +
labs(
x = expression(a),
y = expression(f(a))
) +
theme_minimal(base_size = 14) +
theme(
axis.title = element_text(size = 18, face = "bold"),    # Ztučněné názvy os
axis.text = element_text(size = 16, face = "bold"),     # Ztučněné hodnoty
axis.line = element_line(size = 1, color = "black"),    # Zvýraznění os
axis.ticks = element_line(size = 1, color = "black"),   # Zvýraznění značek
panel.grid.major = element_line(size = 0.5, linetype = "dashed", color = "gray30"), # Hlavní mřížky
panel.grid.minor = element_blank(),                     # Skrytí vedlejších mřížek
axis.title.x = element_text(margin = margin(t = 10)),
axis.title.y = element_text(margin = margin(r = 10))
)
}
#relu
{
# ReLU funkce
relu_function <- function(a) {
pmax(0, a)
}
# Generování dat
a_values <- seq(-10, 10, length.out = 100)
f_values <- relu_function(a_values)
data <- data.frame(a = a_values, f_a = f_values)
# Vykreslení grafu
ggplot(data, aes(x = a, y = f_a)) +
geom_line(color = "black", size = 1.6) +  # Zvýraznění křivky
scale_x_continuous(
breaks = c(-10, 0, 1, 2, 10),
labels = c(expression(-infinity), 0, 1, 2, expression(+infinity))
) +
scale_y_continuous(
breaks = c(0, 1, 2, 10),
labels = c(0, 1, 2, expression(+infinity))
) +
labs(
x = expression(a),
y = expression(f(a))
) +
theme_minimal(base_size = 14) +
theme(
axis.title = element_text(size = 18, face = "bold"),    # Ztučněné názvy os
axis.text = element_text(size = 16, face = "bold"),     # Ztučněné hodnoty
axis.line = element_line(size = 1, color = "black"),    # Zvýraznění os
axis.ticks = element_line(size = 1, color = "black"),   # Zvýraznění značek
panel.grid.major = element_line(size = 0.5, linetype = "dashed", color = "gray30"), # Hlavní mřížky
panel.grid.minor = element_blank(),                     # Skrytí vedlejších mřížek
axis.title.x = element_text(margin = margin(t = 10)),
axis.title.y = element_text(margin = margin(r = 10))
)
}
vysledky
{library(Rcpp)
setwd("C:/Users/danek/Desktop/mlpR/vsnn")
Rcpp::sourceCpp("rcppstuff.cpp")
povodi <- list()
for(i in 1:5){
Qcamel <- read.table(paste0("./vyberdata/",i,"_q.txt"), header=FALSE)
Qcamel <- Qcamel[!(Qcamel$V3 == 2 & Qcamel$V4 == 29), ]
Rcamel <- read.table(paste0("./vyberdata/",i,"_r.txt"), header=FALSE, skip = 4)
Rcamel <- Rcamel[!(Rcamel$V2 == 2 & Rcamel$V3 == 29), ]
cur_pov <- data.frame(Q = (Qcamel$V5 * 0.0283168466), R = Rcamel$V6, Tmax = Rcamel$V9)
cur_pov$Q <- (cur_pov$Q - min(cur_pov$Q))/(max(cur_pov$Q)-min(cur_pov$Q))
cur_pov$R <- (cur_pov$R - min(cur_pov$R))/(max(cur_pov$R)-min(cur_pov$R))
cur_pov$Tmax <- (cur_pov$Tmax - min(cur_pov$Tmax))/(max(cur_pov$Tmax)-min(cur_pov$Tmax))
povodi[[i]] <- cur_pov
rm(cur_pov,Qcamel,Rcamel)
}
names(povodi) <- c("salmon","bigsur","merced","dry","palm")
mae <- function(mod, obs) {
if (length(mod) != length(obs)) {
stop("Vektory musí mít stejnou délku")
}
err = 0
for (i in 1:length(mod)){
err = err + abs(mod[i] - obs[i])
}
err = err/length(mod)
return(err)
}
rmse <- function(mod, obs) {
if (length(mod) != length(obs)) {
stop("Vektory musí mít stejnou délku")
}
err = 0
for (i in 1:length(mod)){
err = err + (mod[i] - obs[i])^2
}
err = sqrt(err/length(mod))
return(err)
}
nse <- function(mod, obs) {
if (length(mod) != length(obs)) {
stop("Vektory musí mít stejnou délku")
}
err = 0
cit = 0
jme = 0
for (i in 1:length(mod)){
cit = cit + (mod[i] - obs[i])^2
jme = jme + (mod[i] - mean(obs))^2
}
err = 1-(cit/length(mod))/(jme/length(mod))
return(err)
}
}  # nacteni Rcpp, dat a funkce kriterii
output_folder <- "D:/pokusydip/"
x = 1
vysl = data.frame()
for(j in 1){
for(i in 3){
iter = 1
mlp <- udelej_nn()
nn_init_nn(mlp,50,c(50,50,1))
nn_set_vstup_rady(mlp, povodi[[i]]$Q[1:600],
povodi[[i]]$Q[601:12000],
povodi[[i]]$R[1:600],
povodi[[i]]$R[601:12000],
povodi[[i]]$Tmax[1:600],
povodi[[i]]$Tmax[601:12000]
)
nn_cnn_full_cal(mlp,iter)
nn_cnn_full_val(mlp)
vystupy <- nn_get_vystupy(mlp)
file_path <- file.path(output_folder, paste0(x, ".png"))
png(file_path, width = 800, height = 600) # Nastavení výstupního souboru
plot.new()
plot(
povodi[[i]]$Q[povodi[[i]]$Q[1001:12020]],
type = "l",
col = "black",
main = paste0("pokus=", j," povodi=",i," iter=", iter),
sub = paste0(" mae=", mae(vystupy,povodi[[i]]$Q[1001:12020]),
" rmse=", rmse(vystupy,povodi[[i]]$Q[1001:12020]),
" nse=", nse(vystupy,povodi[[i]]$Q[1001:12020]))
)
lines(vystupy,col = "red")
dev.off() # Ukončení záznamu do souboru
print(x)
vysl[x,1] = j
vysl[x,2] = i
vysl[x,3] = iter
vysl[x,4] = mae(vystupy,povodi[[i]]$Q[1001:12020])
vysl[x,5] = rmse(vystupy,povodi[[i]]$Q[1001:12020])
vysl[x,6] = nse(vystupy,povodi[[i]]$Q[1001:12020])
x= x+1
}}
vystupy
